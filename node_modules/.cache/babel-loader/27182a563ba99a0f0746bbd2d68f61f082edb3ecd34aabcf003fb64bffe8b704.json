{"ast":null,"code":"var _jsxFileName = \"/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/components/user_pages/SearchBus.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../../utils/api';\nimport BusTracking from './BusTracking2';\nimport '../../css/busTracking.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BusStopsView = ({\n  userLocation,\n  setUserLocation\n}) => {\n  _s();\n  const [buses, setBuses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedBusId, setSelectedBusId] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  useEffect(() => {\n    fetchBuses();\n  }, []);\n  const fetchBuses = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/buses/getAllBuses');\n      if (response.data && response.data.data) {\n        setBuses(response.data.data);\n      }\n      setLoading(false);\n    } catch (err) {\n      console.error('Error fetching buses:', err);\n      setError('Failed to load buses. Please try again later.');\n      setLoading(false);\n    }\n  };\n  const handleTrackBus = busId => {\n    setSelectedBusId(busId);\n  };\n\n  // Filter buses based on search query\n  const filteredBuses = buses.filter(bus => bus.name.toLowerCase().includes(searchQuery.toLowerCase()));\n  if (selectedBusId) {\n    return /*#__PURE__*/_jsxDEV(BusTracking, {\n      userLocation: userLocation,\n      setUserLocation: setUserLocation,\n      selectedBusId: selectedBusId\n    }, `bus-tracking-${selectedBusId}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"buses-view\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Available Buses\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search for a bus...\",\n        value: searchQuery,\n        onChange: e => setSearchQuery(e.target.value),\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading buses...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 23\n    }, this), !loading && filteredBuses.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No buses found. Please try a different search.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bus-list-container\",\n      children: filteredBuses.map(bus => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bus-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bus-card-title\",\n          children: bus.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bus-card-details\",\n          children: [\"ID: \", bus.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"track-bus-button\",\n          onClick: () => handleTrackBus(bus.id),\n          children: \"Track Bus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this)]\n      }, bus.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"refresh-button\",\n      onClick: fetchBuses,\n      children: \"Refresh Buses\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n_s(BusStopsView, \"9/fStsFt5+esElZJkoFwz9XZbck=\");\n_c = BusStopsView;\nexport default BusStopsView;\nvar _c;\n$RefreshReg$(_c, \"BusStopsView\");","map":{"version":3,"names":["React","useState","useEffect","api","BusTracking","jsxDEV","_jsxDEV","BusStopsView","userLocation","setUserLocation","_s","buses","setBuses","loading","setLoading","error","setError","selectedBusId","setSelectedBusId","searchQuery","setSearchQuery","fetchBuses","response","get","data","err","console","handleTrackBus","busId","filteredBuses","filter","bus","name","toLowerCase","includes","fileName","_jsxFileName","lineNumber","columnNumber","className","children","type","placeholder","value","onChange","e","target","length","map","id","onClick","_c","$RefreshReg$"],"sources":["/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/components/user_pages/SearchBus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../../utils/api';\nimport BusTracking from './BusTracking2';\nimport '../../css/busTracking.css';\n\nconst BusStopsView = ({ userLocation, setUserLocation }) => {\n    const [buses, setBuses] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [selectedBusId, setSelectedBusId] = useState(null);\n    const [searchQuery, setSearchQuery] = useState('');\n\n    useEffect(() => {\n        fetchBuses();\n    }, []);\n\n    const fetchBuses = async () => {\n        try {\n            setLoading(true);\n            const response = await api.get('/buses/getAllBuses');\n            if (response.data && response.data.data) {\n                setBuses(response.data.data);\n            }\n            setLoading(false);\n        } catch (err) {\n            console.error('Error fetching buses:', err);\n            setError('Failed to load buses. Please try again later.');\n            setLoading(false);\n        }\n    };\n\n    const handleTrackBus = (busId) => {\n        setSelectedBusId(busId);\n    };\n\n    // Filter buses based on search query\n    const filteredBuses = buses.filter(bus =>\n        bus.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    if (selectedBusId) {\n        return (\n            <BusTracking \n                userLocation={userLocation} \n                setUserLocation={setUserLocation} \n                selectedBusId={selectedBusId}\n                key={`bus-tracking-${selectedBusId}`} // Force component to reset when bus changes\n            />\n        );\n    }\n\n    return (\n        <div className=\"buses-view\">\n            <h2>Available Buses</h2>\n            \n            <div className=\"search-container\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search for a bus...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"search-input\"\n                />\n            </div>\n            \n            {loading && <p>Loading buses...</p>}\n            {error && <div className=\"error-message\">{error}</div>}\n            \n            {!loading && filteredBuses.length === 0 && (\n                <p>No buses found. Please try a different search.</p>\n            )}\n            \n            <div className=\"bus-list-container\">\n                {filteredBuses.map(bus => (\n                    <div className=\"bus-card\" key={bus.id}>\n                        <div className=\"bus-card-title\">{bus.name}</div>\n                        <div className=\"bus-card-details\">\n                            {/* You can add more bus details here if available */}\n                            ID: {bus.id}\n                        </div>\n                        <button \n                            className=\"track-bus-button\"\n                            onClick={() => handleTrackBus(bus.id)}\n                        >\n                            Track Bus\n                        </button>\n                    </div>\n                ))}\n            </div>\n            \n            <button \n                className=\"refresh-button\"\n                onClick={fetchBuses}\n            >\n                Refresh Buses\n            </button>\n        </div>\n    );\n};\n\nexport default BusStopsView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}