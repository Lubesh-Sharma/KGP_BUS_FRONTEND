{"ast":null,"code":"var _jsxFileName = \"/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/components/user_pages/user.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '../../css/user.css';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport api from '../../utils/api.js';\nimport BusTracking from './BusTracking';\n\n// Fix for default marker icons in Leaflet\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\n\n// Custom icons for bus stops\nconst busStopIcon = new L.Icon({\n  iconUrl: 'https://cdn-icons-png.flaticon.com/512/1165/1165895.png',\n  iconSize: [32, 32],\n  iconAnchor: [16, 32],\n  popupAnchor: [0, -32]\n});\n\n// Component to handle location and center changes\nfunction LocationMarker() {\n  _s();\n  const [position, setPosition] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const map = useMap();\n  useEffect(() => {\n    map.locate({\n      setView: true,\n      maxZoom: 16\n    });\n    map.on('locationfound', e => {\n      setPosition(e.latlng);\n      setIsLoading(false);\n      map.flyTo(e.latlng, 16);\n    });\n    map.on('locationerror', e => {\n      console.log(\"Location error:\", e.message);\n      setIsLoading(false);\n      // Default to a location (e.g., KGP campus) if geolocation fails\n      setPosition([22.3149, 87.3104]); // IIT Kharagpur coordinates\n      map.flyTo([22.3149, 87.3104], 14);\n    });\n  }, [map]);\n  return position === null ? null : /*#__PURE__*/_jsxDEV(Marker, {\n    position: position,\n    children: /*#__PURE__*/_jsxDEV(Popup, {\n      children: \"You are here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n\n// MapController component to adjust map view when bus stops change\n_s(LocationMarker, \"SP7+8g8PPuHOWGsTweE1HXG+yuY=\", false, function () {\n  return [useMap];\n});\n_c = LocationMarker;\nconst MapController = ({\n  busStops\n}) => {\n  _s2();\n  const map = useMap();\n  useEffect(() => {\n    if (busStops && busStops.length > 0) {\n      console.log(`MapController: Adjusting map for ${busStops.length} bus stops`);\n\n      // Create bounds to fit all bus stops\n      const bounds = L.latLngBounds([]);\n      busStops.forEach(stop => {\n        if (stop.latitude && stop.longitude) {\n          bounds.extend([parseFloat(stop.latitude), parseFloat(stop.longitude)]);\n        }\n      });\n\n      // Only fit bounds if we have valid coordinates\n      if (bounds.isValid()) {\n        map.fitBounds(bounds, {\n          padding: [50, 50]\n        });\n      }\n    }\n  }, [busStops, map]);\n  return null; // This component doesn't render anything\n};\n\n// Separate component for bus stop markers to ensure proper rendering\n_s2(MapController, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c2 = MapController;\nconst BusStopMarkers = ({\n  busStops\n}) => {\n  console.log(`BusStopMarkers: Rendering ${busStops.length} markers`);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: busStops.map((stop, index) => {\n      // Skip invalid coordinates\n      if (!stop.latitude || !stop.longitude) {\n        return null;\n      }\n      const position = [parseFloat(stop.latitude), parseFloat(stop.longitude)];\n\n      // Validate coordinates\n      if (isNaN(position[0]) || isNaN(position[1])) {\n        return null;\n      }\n      return /*#__PURE__*/_jsxDEV(Marker, {\n        position: position,\n        icon: busStopIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bus-stop-popup\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: stop.name || `Bus Stop ${index + 1}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"ID:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 36\n              }, this), \" \", stop.id || 'Unknown']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Coordinates:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 36\n              }, this), \" \", stop.latitude, \", \", stop.longitude]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 33\n            }, this), stop.created_at && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Added:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 40\n              }, this), \" \", new Date(stop.created_at).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this)\n      }, `bus-stop-${stop.id || index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this);\n    })\n  }, void 0, false);\n};\n_c3 = BusStopMarkers;\nconst User = () => {\n  _s3();\n  const [currentLocation, setCurrentLocation] = useState('');\n  const [destination, setDestination] = useState('');\n  const [mapCenter, setMapCenter] = useState([22.3149, 87.3104]); // Default to IIT KGP\n  const [mapZoom, setMapZoom] = useState(14);\n  const [busStops, setBusStops] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [authError, setAuthError] = useState(null);\n  const [userLocation, setUserLocation] = useState(null);\n  const [activeTab, setActiveTab] = useState('busStops'); // New state for tab selection\n\n  // Get user's location\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        setUserLocation([latitude, longitude]);\n      }, err => {\n        console.error(\"Geolocation error:\", err.message);\n        // Fall back to default location\n        setUserLocation([22.3149, 87.3104]);\n      });\n    }\n  }, []);\n\n  // Fetch bus stops using the configured API utility\n  useEffect(() => {\n    const fetchBusStops = async () => {\n      try {\n        setIsLoading(true);\n        console.log('Fetching bus stops from API');\n\n        // Check if user is logged in\n        const token = localStorage.getItem('jwtToken');\n        if (!token) {\n          setAuthError('You must be logged in to view bus stops');\n          setIsLoading(false);\n          return;\n        }\n        const response = await api.get('/bus_stops/getAllBusStops');\n\n        // Log the complete API response to see its structure\n        console.log('Complete API Response:', response);\n        console.log('Response data:', response.data);\n\n        // Check the exact structure of the response\n        if (response.data && response.data.data) {\n          console.log('Bus stops data array:', response.data.data);\n\n          // Make sure we're getting an array\n          if (Array.isArray(response.data.data)) {\n            setBusStops(response.data.data);\n            console.log(`Loaded ${response.data.data.length} bus stops`);\n\n            // Detailed logging of each stop\n            response.data.data.forEach((stop, index) => {\n              console.log(`Bus stop ${index + 1}:`, JSON.stringify(stop));\n            });\n          } else {\n            console.error('Bus stops data is not an array:', response.data.data);\n            throw new Error('Bus stops data is not in expected array format');\n          }\n        } else {\n          console.error('Invalid API response format:', response.data);\n          throw new Error('Invalid API response format');\n        }\n      } catch (err) {\n        console.error('Error fetching bus stops:', err);\n\n        // Handle auth errors specifically\n        if (err.response && err.response.status === 401) {\n          setAuthError('Authentication required. Please log in again.');\n        } else if (err.response && err.response.status === 403) {\n          setAuthError('You do not have permission to access bus stops.');\n        } else {\n          setError(`Failed to load bus stops: ${err.message}`);\n        }\n        setBusStops([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchBusStops();\n  }, []);\n\n  // Debug output of current state\n  useEffect(() => {\n    console.log('Current busStops state:', busStops);\n    console.log('Number of bus stops in state:', busStops.length);\n  }, [busStops]);\n\n  // Function to handle finding routes\n  const handleFindRoutes = () => {\n    // This will be implemented later to find routes between locations\n    console.log(\"Finding routes from\", currentLocation, \"to\", destination);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-interface\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"control-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"KGP Bus Tracker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this), authError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.href = '/login',\n          children: \"Go to Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'busStops' ? 'active' : ''}`,\n          onClick: () => setActiveTab('busStops'),\n          children: \"Bus Stops\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'trackBus' ? 'active' : ''}`,\n          onClick: () => setActiveTab('trackBus'),\n          children: \"Track Bus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this), activeTab === 'busStops' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bus-stops-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"location-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Current Location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: currentLocation,\n              onChange: e => setCurrentLocation(e.target.value),\n              placeholder: \"Enter your current location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Destination\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: destination,\n              onChange: e => setDestination(e.target.value),\n              placeholder: \"Where do you want to go?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"search-btn\",\n            onClick: handleFindRoutes,\n            children: \"Find Routes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bus-stops-list\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Bus Stops from Database (\", busStops.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 29\n          }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading bus stops from database...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 33\n          }, this) : error ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-message\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 33\n          }, this) : busStops.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No bus stops found in the database.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"debug-info\",\n              children: [\"Found \", busStops.length, \" bus stops\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: busStops.map((stop, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => {\n                  const position = [parseFloat(stop.latitude), parseFloat(stop.longitude)];\n                  setMapCenter(position);\n                  setMapZoom(17);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [index + 1, \".\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 49\n                }, this), \" \", stop.name || 'Unnamed Stop', stop.id ? ` (ID: ${stop.id})` : '']\n              }, stop.id || index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 21\n      }, this) :\n      /*#__PURE__*/\n      // Bus tracking takes the remaining height\n      _jsxDEV(BusTracking, {\n        userLocation: userLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this), activeTab === 'busStops' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-container\",\n      children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n        center: mapCenter,\n        zoom: mapZoom,\n        style: {\n          height: \"100%\",\n          width: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(LocationMarker, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(MapController, {\n          busStops: busStops\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(BusStopMarkers, {\n          busStops: busStops\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 21\n      }, this), process.env.NODE_ENV === 'development' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-debug-panel\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => console.log('Current bus stops:', busStops),\n          children: [\"Log Bus Stops (\", busStops.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 9\n  }, this);\n};\n_s3(User, \"nLsJ2mwDS3yYJAc1mL97wNZrFNQ=\");\n_c4 = User;\nexport default User;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"LocationMarker\");\n$RefreshReg$(_c2, \"MapController\");\n$RefreshReg$(_c3, \"BusStopMarkers\");\n$RefreshReg$(_c4, \"User\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Popup","useMap","L","api","BusTracking","jsxDEV","_jsxDEV","Fragment","_Fragment","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","busStopIcon","iconSize","iconAnchor","popupAnchor","LocationMarker","_s","position","setPosition","isLoading","setIsLoading","map","locate","setView","maxZoom","on","e","latlng","flyTo","console","log","message","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","MapController","busStops","_s2","length","bounds","latLngBounds","forEach","stop","latitude","longitude","extend","parseFloat","isValid","fitBounds","padding","_c2","BusStopMarkers","index","isNaN","icon","className","name","id","created_at","Date","toLocaleString","_c3","User","_s3","currentLocation","setCurrentLocation","destination","setDestination","mapCenter","setMapCenter","mapZoom","setMapZoom","setBusStops","error","setError","authError","setAuthError","userLocation","setUserLocation","activeTab","setActiveTab","navigator","geolocation","getCurrentPosition","coords","err","fetchBusStops","token","localStorage","getItem","response","get","data","Array","isArray","JSON","stringify","Error","status","handleFindRoutes","onClick","window","location","href","type","value","onChange","target","placeholder","center","zoom","style","height","width","attribution","url","process","env","NODE_ENV","_c4","$RefreshReg$"],"sources":["/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/components/user_pages/user.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../../css/user.css';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport api from '../../utils/api.js';\nimport BusTracking from './BusTracking';\n\n// Fix for default marker icons in Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\n\n// Custom icons for bus stops\nconst busStopIcon = new L.Icon({\n    iconUrl: 'https://cdn-icons-png.flaticon.com/512/1165/1165895.png',\n    iconSize: [32, 32],\n    iconAnchor: [16, 32],\n    popupAnchor: [0, -32]\n});\n\n// Component to handle location and center changes\nfunction LocationMarker() {\n    const [position, setPosition] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const map = useMap();\n\n    useEffect(() => {\n        map.locate({ setView: true, maxZoom: 16 });\n        \n        map.on('locationfound', (e) => {\n            setPosition(e.latlng);\n            setIsLoading(false);\n            map.flyTo(e.latlng, 16);\n        });\n\n        map.on('locationerror', (e) => {\n            console.log(\"Location error:\", e.message);\n            setIsLoading(false);\n            // Default to a location (e.g., KGP campus) if geolocation fails\n            setPosition([22.3149, 87.3104]); // IIT Kharagpur coordinates\n            map.flyTo([22.3149, 87.3104], 14);\n        });\n    }, [map]);\n\n    return position === null ? null : (\n        <Marker position={position}>\n            <Popup>You are here</Popup>\n        </Marker>\n    );\n}\n\n// MapController component to adjust map view when bus stops change\nconst MapController = ({ busStops }) => {\n    const map = useMap();\n    \n    useEffect(() => {\n        if (busStops && busStops.length > 0) {\n            console.log(`MapController: Adjusting map for ${busStops.length} bus stops`);\n            \n            // Create bounds to fit all bus stops\n            const bounds = L.latLngBounds([]);\n            busStops.forEach(stop => {\n                if (stop.latitude && stop.longitude) {\n                    bounds.extend([parseFloat(stop.latitude), parseFloat(stop.longitude)]);\n                }\n            });\n            \n            // Only fit bounds if we have valid coordinates\n            if (bounds.isValid()) {\n                map.fitBounds(bounds, { padding: [50, 50] });\n            }\n        }\n    }, [busStops, map]);\n    \n    return null; // This component doesn't render anything\n};\n\n// Separate component for bus stop markers to ensure proper rendering\nconst BusStopMarkers = ({ busStops }) => {\n    console.log(`BusStopMarkers: Rendering ${busStops.length} markers`);\n    \n    return (\n        <>\n            {busStops.map((stop, index) => {\n                // Skip invalid coordinates\n                if (!stop.latitude || !stop.longitude) {\n                    return null;\n                }\n                \n                const position = [\n                    parseFloat(stop.latitude), \n                    parseFloat(stop.longitude)\n                ];\n                \n                // Validate coordinates\n                if (isNaN(position[0]) || isNaN(position[1])) {\n                    return null;\n                }\n                \n                return (\n                    <Marker \n                        key={`bus-stop-${stop.id || index}`}\n                        position={position}\n                        icon={busStopIcon}\n                    >\n                        <Popup>\n                            <div className=\"bus-stop-popup\">\n                                <h3>{stop.name || `Bus Stop ${index + 1}`}</h3>\n                                <p><strong>ID:</strong> {stop.id || 'Unknown'}</p>\n                                <p><strong>Coordinates:</strong> {stop.latitude}, {stop.longitude}</p>\n                                {stop.created_at && (\n                                    <p><strong>Added:</strong> {new Date(stop.created_at).toLocaleString()}</p>\n                                )}\n                            </div>\n                        </Popup>\n                    </Marker>\n                );\n            })}\n        </>\n    );\n};\n\nconst User = () => {\n    const [currentLocation, setCurrentLocation] = useState('');\n    const [destination, setDestination] = useState('');\n    const [mapCenter, setMapCenter] = useState([22.3149, 87.3104]); // Default to IIT KGP\n    const [mapZoom, setMapZoom] = useState(14);\n    const [busStops, setBusStops] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [authError, setAuthError] = useState(null);\n    const [userLocation, setUserLocation] = useState(null);\n    const [activeTab, setActiveTab] = useState('busStops'); // New state for tab selection\n\n    // Get user's location\n    useEffect(() => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(\n                (position) => {\n                    const { latitude, longitude } = position.coords;\n                    setUserLocation([latitude, longitude]);\n                },\n                (err) => {\n                    console.error(\"Geolocation error:\", err.message);\n                    // Fall back to default location\n                    setUserLocation([22.3149, 87.3104]);\n                }\n            );\n        }\n    }, []);\n\n    // Fetch bus stops using the configured API utility\n    useEffect(() => {\n        const fetchBusStops = async () => {\n            try {\n                setIsLoading(true);\n                console.log('Fetching bus stops from API');\n                \n                // Check if user is logged in\n                const token = localStorage.getItem('jwtToken');\n                if (!token) {\n                    setAuthError('You must be logged in to view bus stops');\n                    setIsLoading(false);\n                    return;\n                }\n                \n                const response = await api.get('/bus_stops/getAllBusStops');\n                \n                // Log the complete API response to see its structure\n                console.log('Complete API Response:', response);\n                console.log('Response data:', response.data);\n                \n                // Check the exact structure of the response\n                if (response.data && response.data.data) {\n                    console.log('Bus stops data array:', response.data.data);\n                    \n                    // Make sure we're getting an array\n                    if (Array.isArray(response.data.data)) {\n                        setBusStops(response.data.data);\n                        console.log(`Loaded ${response.data.data.length} bus stops`);\n                        \n                        // Detailed logging of each stop\n                        response.data.data.forEach((stop, index) => {\n                            console.log(`Bus stop ${index + 1}:`, JSON.stringify(stop));\n                        });\n                    } else {\n                        console.error('Bus stops data is not an array:', response.data.data);\n                        throw new Error('Bus stops data is not in expected array format');\n                    }\n                } else {\n                    console.error('Invalid API response format:', response.data);\n                    throw new Error('Invalid API response format');\n                }\n            } catch (err) {\n                console.error('Error fetching bus stops:', err);\n                \n                // Handle auth errors specifically\n                if (err.response && err.response.status === 401) {\n                    setAuthError('Authentication required. Please log in again.');\n                } else if (err.response && err.response.status === 403) {\n                    setAuthError('You do not have permission to access bus stops.');\n                } else {\n                    setError(`Failed to load bus stops: ${err.message}`);\n                }\n                \n                setBusStops([]);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        fetchBusStops();\n    }, []);\n\n    // Debug output of current state\n    useEffect(() => {\n        console.log('Current busStops state:', busStops);\n        console.log('Number of bus stops in state:', busStops.length);\n    }, [busStops]);\n\n    // Function to handle finding routes\n    const handleFindRoutes = () => {\n        // This will be implemented later to find routes between locations\n        console.log(\"Finding routes from\", currentLocation, \"to\", destination);\n    };\n\n    return (\n        <div className=\"map-interface\">\n            {/* Left panel for controls */}\n            <div className=\"control-panel\">\n                <h2>KGP Bus Tracker</h2>\n                \n                {authError && (\n                    <div className=\"auth-error-message\">\n                        <p>{authError}</p>\n                        <button onClick={() => window.location.href = '/login'}>\n                            Go to Login\n                        </button>\n                    </div>\n                )}\n                \n                <div className=\"tab-navigation\">\n                    <button \n                        className={`tab-button ${activeTab === 'busStops' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('busStops')}\n                    >\n                        Bus Stops\n                    </button>\n                    <button \n                        className={`tab-button ${activeTab === 'trackBus' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('trackBus')}\n                    >\n                        Track Bus\n                    </button>\n                </div>\n                \n                {activeTab === 'busStops' ? (\n                    <div className=\"bus-stops-content\">\n                        {/* Original bus stops content */}\n                        <div className=\"location-form\">\n                            <div className=\"form-group\">\n                                <label>Current Location</label>\n                                <input \n                                    type=\"text\" \n                                    value={currentLocation}\n                                    onChange={(e) => setCurrentLocation(e.target.value)}\n                                    placeholder=\"Enter your current location\"\n                                />\n                            </div>\n                            \n                            <div className=\"form-group\">\n                                <label>Destination</label>\n                                <input \n                                    type=\"text\" \n                                    value={destination}\n                                    onChange={(e) => setDestination(e.target.value)}\n                                    placeholder=\"Where do you want to go?\"\n                                />\n                            </div>\n                            \n                            <button className=\"search-btn\" onClick={handleFindRoutes}>Find Routes</button>\n                        </div>\n\n                        <div className=\"bus-stops-list\">\n                            <h3>Bus Stops from Database ({busStops.length})</h3>\n                            {isLoading ? (\n                                <p>Loading bus stops from database...</p>\n                            ) : error ? (\n                                <p className=\"error-message\">{error}</p>\n                            ) : busStops.length === 0 ? (\n                                <p>No bus stops found in the database.</p>\n                            ) : (\n                                <>\n                                    <p className=\"debug-info\">Found {busStops.length} bus stops</p>\n                                    <ul>\n                                        {busStops.map((stop, index) => (\n                                            <li key={stop.id || index} onClick={() => {\n                                                const position = [parseFloat(stop.latitude), parseFloat(stop.longitude)];\n                                                setMapCenter(position);\n                                                setMapZoom(17);\n                                            }}>\n                                                <strong>{index + 1}.</strong> {stop.name || 'Unnamed Stop'} \n                                                {stop.id ? ` (ID: ${stop.id})` : ''}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </>\n                            )}\n                        </div>\n                    </div>\n                ) : (\n                    // Bus tracking takes the remaining height\n                    <BusTracking userLocation={userLocation} />\n                )}\n            </div>\n            \n            {/* Only show map container when in Bus Stops tab */}\n            {activeTab === 'busStops' && (\n                <div className=\"map-container\">\n                    <MapContainer \n                        center={mapCenter} \n                        zoom={mapZoom} \n                        style={{ height: \"100%\", width: \"100%\" }}\n                    >\n                        <TileLayer\n                            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n                            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                        />\n                        <LocationMarker />\n                        <MapController busStops={busStops} />\n                        <BusStopMarkers busStops={busStops} />\n                    </MapContainer>\n                    \n                    {/* Add a debug panel to show raw data */}\n                    {process.env.NODE_ENV === 'development' && (\n                        <div className=\"map-debug-panel\">\n                            <button onClick={() => console.log('Current bus stops:', busStops)}>\n                                Log Bus Stops ({busStops.length})\n                            </button>\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default User;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}