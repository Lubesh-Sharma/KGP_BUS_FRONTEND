{"ast":null,"code":"import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://10.5.18.69:5000';\nconst apiConfig = {\n  baseURL: API_URL,\n  endpoints: {\n    // Remove redundant auth endpoints, keeping only what's needed\n    // Admin-related\n    adminBuses: '/api/admin/buses',\n    adminAddBus: '/api/admin/buses/add',\n    adminLogin: '/api/auth/admin/login',\n    // User-related\n    userProfile: '/api/users/profile',\n    updateProfile: '/api/users/profile/update',\n    // Location endpoints\n    userLocation: '/api/location/mylocation',\n    updateLocation: '/api/location/update',\n    busLocations: '/api/location/buses',\n    allRoutes: '/api/routes',\n    // Admin-related\n    adminBuses: '/api/admin/buses',\n    adminAddBus: '/api/admin/buses/add',\n    adminUpdateBus: id => `/api/admin/buses/${id}/update`,\n    adminDeleteBus: id => `/api/admin/buses/${id}/delete`,\n    adminStops: '/api/admin/stops',\n    adminAddStop: '/api/admin/stops/add',\n    adminUpdateStop: id => `/api/admin/stops/${id}/update`,\n    adminDeleteStop: id => `/api/admin/stops/${id}/delete`,\n    adminRoutes: '/api/admin/routes',\n    adminRouteById: id => `/api/admin/routes/${id}`,\n    adminAddRoute: '/api/admin/routes/add',\n    adminUpdateRoute: id => `/api/admin/routes/${id}/update`,\n    adminDeleteRoute: id => `/api/admin/routes/${id}/delete`,\n    adminDrivers: '/api/admin/drivers',\n    adminAddDriver: '/api/admin/drivers/add',\n    adminUpdateDriver: id => `/api/admin/drivers/${id}/update`,\n    adminDeleteDriver: id => `/api/admin/drivers/${id}/delete`,\n    adminStats: '/api/admin/statistics',\n    adminUserLocations: '/api/admin/users/locations'\n  }\n};\nexport const getApiUrl = endpoint => {\n  if (typeof endpoint === 'function') {\n    // If endpoint is a function (like adminUpdateBus), it needs to be called with arguments\n    return `${apiConfig.baseURL}${endpoint()}`;\n  }\n\n  // Handle direct string endpoints\n  return `${apiConfig.baseURL}${endpoint}`;\n};\n\n// New helper to handle API calls with better error handling\nexport const callApi = async (endpoint, options = {}) => {\n  try {\n    const url = getApiUrl(endpoint);\n    const response = await axios({\n      url,\n      ...options,\n      timeout: options.timeout || 15000 // Default timeout of 15 seconds\n    });\n    return response.data;\n  } catch (error) {\n    if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\n      console.error('API request timed out:', endpoint);\n      throw new Error('Request timed out. The server might be temporarily unavailable.');\n    }\n    throw error;\n  }\n};\nexport default apiConfig;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","apiConfig","baseURL","endpoints","adminBuses","adminAddBus","adminLogin","userProfile","updateProfile","userLocation","updateLocation","busLocations","allRoutes","adminUpdateBus","id","adminDeleteBus","adminStops","adminAddStop","adminUpdateStop","adminDeleteStop","adminRoutes","adminRouteById","adminAddRoute","adminUpdateRoute","adminDeleteRoute","adminDrivers","adminAddDriver","adminUpdateDriver","adminDeleteDriver","adminStats","adminUserLocations","getApiUrl","endpoint","callApi","options","url","response","timeout","data","error","code","message","includes","console","Error"],"sources":["/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/utils/api2.js"],"sourcesContent":["import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://10.5.18.69:5000';\n\n\nconst apiConfig = {\n  baseURL: API_URL,\n  endpoints: {\n    // Remove redundant auth endpoints, keeping only what's needed\n    // Admin-related\n    adminBuses: '/api/admin/buses',\n    adminAddBus: '/api/admin/buses/add',\n    adminLogin: '/api/auth/admin/login',\n    \n    // User-related\n    userProfile: '/api/users/profile',\n    updateProfile: '/api/users/profile/update',\n    \n    // Location endpoints\n    userLocation: '/api/location/mylocation',\n    updateLocation: '/api/location/update',\n    busLocations: '/api/location/buses',\n    allRoutes: '/api/routes',\n    \n    // Admin-related\n    adminBuses: '/api/admin/buses',\n    adminAddBus: '/api/admin/buses/add',\n    adminUpdateBus: (id) => `/api/admin/buses/${id}/update`,\n    adminDeleteBus: (id) => `/api/admin/buses/${id}/delete`,\n    \n    adminStops: '/api/admin/stops',\n    adminAddStop: '/api/admin/stops/add',\n    adminUpdateStop: (id) => `/api/admin/stops/${id}/update`,\n    adminDeleteStop: (id) => `/api/admin/stops/${id}/delete`,\n    \n    adminRoutes: '/api/admin/routes',\n    adminRouteById: (id) => `/api/admin/routes/${id}`,\n    adminAddRoute: '/api/admin/routes/add',\n    adminUpdateRoute: (id) => `/api/admin/routes/${id}/update`,\n    adminDeleteRoute: (id) => `/api/admin/routes/${id}/delete`,\n    \n    adminDrivers: '/api/admin/drivers',\n    adminAddDriver: '/api/admin/drivers/add',\n    adminUpdateDriver: (id) => `/api/admin/drivers/${id}/update`,\n    adminDeleteDriver: (id) => `/api/admin/drivers/${id}/delete`,\n    \n    adminStats: '/api/admin/statistics',\n    adminUserLocations: '/api/admin/users/locations',\n  }\n};\n\nexport const getApiUrl = (endpoint) => {\n  if (typeof endpoint === 'function') {\n    // If endpoint is a function (like adminUpdateBus), it needs to be called with arguments\n    return `${apiConfig.baseURL}${endpoint()}`;\n  }\n  \n  // Handle direct string endpoints\n  return `${apiConfig.baseURL}${endpoint}`;\n};\n\n// New helper to handle API calls with better error handling\nexport const callApi = async (endpoint, options = {}) => {\n  try {\n    const url = getApiUrl(endpoint);\n    const response = await axios({\n      url,\n      ...options,\n      timeout: options.timeout || 15000, // Default timeout of 15 seconds\n    });\n    return response.data;\n  } catch (error) {\n    if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\n      console.error('API request timed out:', endpoint);\n      throw new Error('Request timed out. The server might be temporarily unavailable.');\n    }\n    throw error;\n  }\n};\n\nexport default apiConfig;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,wBAAwB;AAGzE,MAAMC,SAAS,GAAG;EAChBC,OAAO,EAAEL,OAAO;EAChBM,SAAS,EAAE;IACT;IACA;IACAC,UAAU,EAAE,kBAAkB;IAC9BC,WAAW,EAAE,sBAAsB;IACnCC,UAAU,EAAE,uBAAuB;IAEnC;IACAC,WAAW,EAAE,oBAAoB;IACjCC,aAAa,EAAE,2BAA2B;IAE1C;IACAC,YAAY,EAAE,0BAA0B;IACxCC,cAAc,EAAE,sBAAsB;IACtCC,YAAY,EAAE,qBAAqB;IACnCC,SAAS,EAAE,aAAa;IAExB;IACAR,UAAU,EAAE,kBAAkB;IAC9BC,WAAW,EAAE,sBAAsB;IACnCQ,cAAc,EAAGC,EAAE,IAAK,oBAAoBA,EAAE,SAAS;IACvDC,cAAc,EAAGD,EAAE,IAAK,oBAAoBA,EAAE,SAAS;IAEvDE,UAAU,EAAE,kBAAkB;IAC9BC,YAAY,EAAE,sBAAsB;IACpCC,eAAe,EAAGJ,EAAE,IAAK,oBAAoBA,EAAE,SAAS;IACxDK,eAAe,EAAGL,EAAE,IAAK,oBAAoBA,EAAE,SAAS;IAExDM,WAAW,EAAE,mBAAmB;IAChCC,cAAc,EAAGP,EAAE,IAAK,qBAAqBA,EAAE,EAAE;IACjDQ,aAAa,EAAE,uBAAuB;IACtCC,gBAAgB,EAAGT,EAAE,IAAK,qBAAqBA,EAAE,SAAS;IAC1DU,gBAAgB,EAAGV,EAAE,IAAK,qBAAqBA,EAAE,SAAS;IAE1DW,YAAY,EAAE,oBAAoB;IAClCC,cAAc,EAAE,wBAAwB;IACxCC,iBAAiB,EAAGb,EAAE,IAAK,sBAAsBA,EAAE,SAAS;IAC5Dc,iBAAiB,EAAGd,EAAE,IAAK,sBAAsBA,EAAE,SAAS;IAE5De,UAAU,EAAE,uBAAuB;IACnCC,kBAAkB,EAAE;EACtB;AACF,CAAC;AAED,OAAO,MAAMC,SAAS,GAAIC,QAAQ,IAAK;EACrC,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;IAClC;IACA,OAAO,GAAG/B,SAAS,CAACC,OAAO,GAAG8B,QAAQ,CAAC,CAAC,EAAE;EAC5C;;EAEA;EACA,OAAO,GAAG/B,SAAS,CAACC,OAAO,GAAG8B,QAAQ,EAAE;AAC1C,CAAC;;AAED;AACA,OAAO,MAAMC,OAAO,GAAG,MAAAA,CAAOD,QAAQ,EAAEE,OAAO,GAAG,CAAC,CAAC,KAAK;EACvD,IAAI;IACF,MAAMC,GAAG,GAAGJ,SAAS,CAACC,QAAQ,CAAC;IAC/B,MAAMI,QAAQ,GAAG,MAAMxC,KAAK,CAAC;MAC3BuC,GAAG;MACH,GAAGD,OAAO;MACVG,OAAO,EAAEH,OAAO,CAACG,OAAO,IAAI,KAAK,CAAE;IACrC,CAAC,CAAC;IACF,OAAOD,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,IAAIA,KAAK,CAACC,IAAI,KAAK,cAAc,IAAID,KAAK,CAACE,OAAO,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;MACtEC,OAAO,CAACJ,KAAK,CAAC,wBAAwB,EAAEP,QAAQ,CAAC;MACjD,MAAM,IAAIY,KAAK,CAAC,iEAAiE,CAAC;IACpF;IACA,MAAML,KAAK;EACb;AACF,CAAC;AAED,eAAetC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}