{"ast":null,"code":"import axios from 'axios';\n\n// Base URL based on environment\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://10.5.18.69:5000';\n\n// Define API endpoints\nconst apiConfig = {\n  endpoints: {\n    // Admin endpoints\n    adminBuses: '/admin/buses',\n    adminAddBus: '/admin/buses/add',\n    adminUpdateBus: id => `/admin/buses/${id}/update`,\n    adminDeleteBus: id => `/admin/buses/${id}/delete`,\n    adminStops: '/admin/stops',\n    adminAddStop: '/admin/stops/add',\n    adminUpdateStop: id => `/admin/stops/${id}/update`,\n    adminDeleteStop: id => `/admin/stops/${id}/delete`,\n    adminRoutes: '/admin/routes',\n    adminRouteById: id => `/admin/routes/${id}`,\n    adminAddRoute: '/admin/routes/add',\n    adminUpdateRoute: id => `/admin/routes/${id}/update`,\n    adminDeleteRoute: id => `/admin/routes/${id}/delete`,\n    adminDrivers: '/admin/drivers',\n    adminAddDriver: '/admin/drivers/add',\n    adminUpdateDriver: id => `/admin/drivers/${id}/update`,\n    adminDeleteDriver: id => `/admin/drivers/${id}/delete`,\n    adminStats: '/admin/statistics',\n    adminUserLocations: '/admin/users/locations'\n  }\n};\n\n// Helper function to build full API URLs\nexport const getApiUrl = path => {\n  return `${API_BASE_URL}${path}`;\n};\n\n// New helper to handle API calls with better error handling\nexport const callApi = async (endpoint, options = {}) => {\n  try {\n    const url = getApiUrl(endpoint);\n    const response = await axios({\n      url,\n      ...options,\n      timeout: options.timeout || 15000 // Default timeout of 15 seconds\n    });\n    return response.data;\n  } catch (error) {\n    if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\n      console.error('API request timed out:', endpoint);\n      throw new Error('Request timed out. The server might be temporarily unavailable.');\n    }\n    throw error;\n  }\n};\nexport default apiConfig;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiConfig","endpoints","adminBuses","adminAddBus","adminUpdateBus","id","adminDeleteBus","adminStops","adminAddStop","adminUpdateStop","adminDeleteStop","adminRoutes","adminRouteById","adminAddRoute","adminUpdateRoute","adminDeleteRoute","adminDrivers","adminAddDriver","adminUpdateDriver","adminDeleteDriver","adminStats","adminUserLocations","getApiUrl","path","callApi","endpoint","options","url","response","timeout","data","error","code","message","includes","console","Error"],"sources":["/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/utils/api2.js"],"sourcesContent":["import axios from 'axios';\n\n// Base URL based on environment\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://10.5.18.69:5000';\n\n// Define API endpoints\nconst apiConfig = {\n    endpoints: {\n        // Admin endpoints\n        adminBuses: '/admin/buses',\n        adminAddBus: '/admin/buses/add',\n        adminUpdateBus: (id) => `/admin/buses/${id}/update`,\n        adminDeleteBus: (id) => `/admin/buses/${id}/delete`,\n        \n        adminStops: '/admin/stops',\n        adminAddStop: '/admin/stops/add',\n        adminUpdateStop: (id) => `/admin/stops/${id}/update`,\n        adminDeleteStop: (id) => `/admin/stops/${id}/delete`,\n        \n        adminRoutes: '/admin/routes',\n        adminRouteById: (id) => `/admin/routes/${id}`,\n        adminAddRoute: '/admin/routes/add',\n        adminUpdateRoute: (id) => `/admin/routes/${id}/update`,\n        adminDeleteRoute: (id) => `/admin/routes/${id}/delete`,\n        \n        adminDrivers: '/admin/drivers',\n        adminAddDriver: '/admin/drivers/add',\n        adminUpdateDriver: (id) => `/admin/drivers/${id}/update`,\n        adminDeleteDriver: (id) => `/admin/drivers/${id}/delete`,\n        \n        adminStats: '/admin/statistics',\n        adminUserLocations: '/admin/users/locations',\n    }\n};\n\n// Helper function to build full API URLs\nexport const getApiUrl = (path) => {\n    return `${API_BASE_URL}${path}`;\n};\n\n// New helper to handle API calls with better error handling\nexport const callApi = async (endpoint, options = {}) => {\n  try {\n    const url = getApiUrl(endpoint);\n    const response = await axios({\n      url,\n      ...options,\n      timeout: options.timeout || 15000, // Default timeout of 15 seconds\n    });\n    return response.data;\n  } catch (error) {\n    if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\n      console.error('API request timed out:', endpoint);\n      throw new Error('Request timed out. The server might be temporarily unavailable.');\n    }\n    throw error;\n  }\n};\n\nexport default apiConfig;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,wBAAwB;;AAE9E;AACA,MAAMC,SAAS,GAAG;EACdC,SAAS,EAAE;IACP;IACAC,UAAU,EAAE,cAAc;IAC1BC,WAAW,EAAE,kBAAkB;IAC/BC,cAAc,EAAGC,EAAE,IAAK,gBAAgBA,EAAE,SAAS;IACnDC,cAAc,EAAGD,EAAE,IAAK,gBAAgBA,EAAE,SAAS;IAEnDE,UAAU,EAAE,cAAc;IAC1BC,YAAY,EAAE,kBAAkB;IAChCC,eAAe,EAAGJ,EAAE,IAAK,gBAAgBA,EAAE,SAAS;IACpDK,eAAe,EAAGL,EAAE,IAAK,gBAAgBA,EAAE,SAAS;IAEpDM,WAAW,EAAE,eAAe;IAC5BC,cAAc,EAAGP,EAAE,IAAK,iBAAiBA,EAAE,EAAE;IAC7CQ,aAAa,EAAE,mBAAmB;IAClCC,gBAAgB,EAAGT,EAAE,IAAK,iBAAiBA,EAAE,SAAS;IACtDU,gBAAgB,EAAGV,EAAE,IAAK,iBAAiBA,EAAE,SAAS;IAEtDW,YAAY,EAAE,gBAAgB;IAC9BC,cAAc,EAAE,oBAAoB;IACpCC,iBAAiB,EAAGb,EAAE,IAAK,kBAAkBA,EAAE,SAAS;IACxDc,iBAAiB,EAAGd,EAAE,IAAK,kBAAkBA,EAAE,SAAS;IAExDe,UAAU,EAAE,mBAAmB;IAC/BC,kBAAkB,EAAE;EACxB;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,SAAS,GAAIC,IAAI,IAAK;EAC/B,OAAO,GAAG3B,YAAY,GAAG2B,IAAI,EAAE;AACnC,CAAC;;AAED;AACA,OAAO,MAAMC,OAAO,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACvD,IAAI;IACF,MAAMC,GAAG,GAAGL,SAAS,CAACG,QAAQ,CAAC;IAC/B,MAAMG,QAAQ,GAAG,MAAMjC,KAAK,CAAC;MAC3BgC,GAAG;MACH,GAAGD,OAAO;MACVG,OAAO,EAAEH,OAAO,CAACG,OAAO,IAAI,KAAK,CAAE;IACrC,CAAC,CAAC;IACF,OAAOD,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,IAAIA,KAAK,CAACC,IAAI,KAAK,cAAc,IAAID,KAAK,CAACE,OAAO,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;MACtEC,OAAO,CAACJ,KAAK,CAAC,wBAAwB,EAAEN,QAAQ,CAAC;MACjD,MAAM,IAAIW,KAAK,CAAC,iEAAiE,CAAC;IACpF;IACA,MAAML,KAAK;EACb;AACF,CAAC;AAED,eAAe/B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}