{"ast":null,"code":"var _jsxFileName = \"/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/components/user_pages/BusStopSearch.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { GoogleMap, useJsApiLoader, Marker, InfoWindow, DirectionsRenderer } from '@react-google-maps/api';\nimport api from '../../utils/api';\nimport '../../css/user.css';\n\n// Default map container styles\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst mapContainerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n// Map options with default controls enabled\nconst defaultOptions = {\n  mapTypeControl: true,\n  streetViewControl: true,\n  fullscreenControl: true,\n  zoomControl: true,\n  // Enable the built-in My Location control\n  myLocationButtonControl: true,\n  // Keep default controls visible\n  disableDefaultUI: false\n};\n\n// Component to handle routing between points using Google Directions API\nconst DirectionsService = ({\n  startPoint,\n  endPoint,\n  setDirections,\n  setIsPathLoading\n}) => {\n  _s();\n  useEffect(() => {\n    if (!startPoint || !endPoint) return;\n    setIsPathLoading(true);\n    const directionsService = new window.google.maps.DirectionsService();\n    directionsService.route({\n      origin: {\n        lat: startPoint[0],\n        lng: startPoint[1]\n      },\n      destination: {\n        lat: endPoint[0],\n        lng: endPoint[1]\n      },\n      travelMode: window.google.maps.TravelMode.WALKING\n    }, (result, status) => {\n      if (status === window.google.maps.DirectionsStatus.OK) {\n        setDirections(result);\n      } else {\n        console.error(`Directions request failed: ${status}`);\n      }\n      setIsPathLoading(false);\n    });\n    return () => {\n      setDirections(null);\n    };\n  }, [startPoint, endPoint, setDirections, setIsPathLoading]);\n  return null;\n};\n\n// // Button to center on user's location\n// const LocationButton = ({ userLocation, onClick }) => {\n//   return (\n//     <button \n//       className=\"location-button\" \n//       onClick={onClick}\n//       disabled={!userLocation}\n//       title=\"Center map on your location\"\n//     >\n//       <i className=\"fas fa-location-arrow\"></i> Your Current Location\n//     </button>\n//   );\n// };\n_s(DirectionsService, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = DirectionsService;\nconst BusStopSearch = ({\n  userLocation,\n  setUserLocation\n}) => {\n  _s2();\n  // Load the Google Maps JS API\n  const {\n    isLoaded,\n    loadError\n  } = useJsApiLoader({\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n    libraries: ['places']\n  });\n  const [busStops, setBusStops] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [mapCenter, setMapCenter] = useState(userLocation || {\n    lat: 22.3190,\n    lng: 87.3091\n  });\n  const [zoom, setZoom] = useState(15);\n  const [coordinates, setCoordinates] = useState({\n    latitude: '',\n    longitude: ''\n  });\n  const [searchMarker, setSearchMarker] = useState(userLocation ? {\n    lat: userLocation[0],\n    lng: userLocation[1]\n  } : {\n    lat: 22.3190,\n    lng: 87.3091\n  });\n  const [searchResults, setSearchResults] = useState([]);\n  const [hasSearched, setHasSearched] = useState(false);\n  const [isPathLoading, setIsPathLoading] = useState(false);\n  const [selectedStop, setSelectedStop] = useState(null);\n  const [selectedMarker, setSelectedMarker] = useState(null);\n  const [directions, setDirections] = useState(null);\n  const mapRef = useRef(null);\n\n  // Initialize coordinates with user's location as soon as it's available\n  useEffect(() => {\n    if (userLocation) {\n      setCoordinates({\n        latitude: userLocation[0].toFixed(6),\n        longitude: userLocation[1].toFixed(6)\n      });\n      setMapCenter({\n        lat: userLocation[0],\n        lng: userLocation[1]\n      });\n      setSearchMarker({\n        lat: userLocation[0],\n        lng: userLocation[1]\n      });\n    }\n  }, [userLocation]);\n\n  // Function to fetch bus stops\n  const fetchBusStops = async () => {\n    try {\n      console.log('Fetching bus stops from API');\n      const response = await api.get('/bus_stops/getAllBusStops');\n      console.log('Raw API response:', response.data);\n      if (response.data && response.data.data) {\n        return response.data.data;\n      } else {\n        console.error('Invalid response format:', response.data);\n        return [];\n      }\n    } catch (error) {\n      console.error('Error fetching bus stops from database:', error);\n      throw error;\n    }\n  };\n\n  // Load bus stops on component mount\n  useEffect(() => {\n    const loadBusStops = async () => {\n      try {\n        setLoading(true);\n        const data = await fetchBusStops();\n        const busStopsArray = Array.isArray(data) ? data : [];\n        const cleanedData = busStopsArray.map(stop => ({\n          ...stop,\n          latitude: parseFloat(stop.latitude),\n          longitude: parseFloat(stop.longitude)\n        }));\n        setBusStops(cleanedData);\n        setError(null);\n      } catch (err) {\n        console.error(\"Error loading bus stops:\", err);\n        setError(\"Failed to load bus stops. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadBusStops();\n  }, []);\n\n  // Handle form input changes\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCoordinates(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Center map on user location with maximum zoom\n  const handleCenterOnUser = () => {\n    if (userLocation) {\n      setMapCenter({\n        lat: userLocation[0],\n        lng: userLocation[1]\n      });\n      setZoom(19);\n      setCoordinates({\n        latitude: userLocation[0].toFixed(6),\n        longitude: userLocation[1].toFixed(6)\n      });\n    }\n  };\n\n  // Function to search for nearby bus stops\n  const handleSearch = () => {\n    try {\n      const lat = parseFloat(coordinates.latitude);\n      const lng = parseFloat(coordinates.longitude);\n      if (isNaN(lat) || isNaN(lng) || lat < -90 || lat > 90 || lng < -180 || lng > 180) {\n        setError(\"Please enter valid coordinates\");\n        return;\n      }\n      setError(null);\n      setSearchMarker({\n        lat,\n        lng\n      });\n      const results = busStops.map(stop => {\n        const distance = calculateDistance(lat, lng, stop.latitude, stop.longitude);\n        return {\n          ...stop,\n          distance: distance\n        };\n      });\n      const sortedResults = [...results].sort((a, b) => a.distance - b.distance);\n      setSearchResults(sortedResults);\n      setHasSearched(true);\n      setMapCenter({\n        lat,\n        lng\n      });\n      setZoom(16);\n    } catch (error) {\n      console.error(\"Search error:\", error);\n      setError(\"An error occurred during search\");\n    }\n  };\n\n  // Handle click on search result item\n  const handleStopSelect = stop => {\n    setMapCenter({\n      lat: stop.latitude,\n      lng: stop.longitude\n    });\n    setZoom(18);\n    setSelectedStop(stop);\n    setSelectedMarker(stop.id);\n  };\n\n  // Calculate distance between two coordinates using Haversine formula\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371e3;\n    const φ1 = lat1 * Math.PI / 180;\n    const φ2 = lat2 * Math.PI / 180;\n    const Δφ = (lat2 - lat1) * Math.PI / 180;\n    const Δλ = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  // Format distance for display\n  const formatDistance = meters => {\n    if (meters < 1000) {\n      return `${Math.round(meters)} meters`;\n    } else {\n      return `${(meters / 1000).toFixed(2)} km`;\n    }\n  };\n\n  // Handle map click to set coordinates\n  const onMapClick = useCallback(e => {\n    const lat = e.latLng.lat();\n    const lng = e.latLng.lng();\n    setCoordinates({\n      latitude: lat.toFixed(6),\n      longitude: lng.toFixed(6)\n    });\n    setSearchMarker({\n      lat,\n      lng\n    });\n  }, []);\n\n  // Store map instance when it loads\n  const onLoad = useCallback(map => {\n    mapRef.current = map;\n  }, []);\n\n  // Clean up function when component unmounts\n  const onUnmount = useCallback(() => {\n    mapRef.current = null;\n  }, []);\n  if (loadError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [\"Error loading Google Maps: \", loadError.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-message\",\n      children: \"Loading Google Maps...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bus-stop-search\",\n    children: [isPathLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"full-page-loading-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading route. Please wait...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"location-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-panel-top\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Search Bus Stops\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"latitude\",\n              children: \"Latitude:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"latitude\",\n              name: \"latitude\",\n              value: coordinates.latitude,\n              onChange: handleInputChange,\n              placeholder: \"e.g. 22.3190\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"longitude\",\n              children: \"Longitude:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"longitude\",\n              name: \"longitude\",\n              value: coordinates.longitude,\n              onChange: handleInputChange,\n              placeholder: \"e.g. 87.3091\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"help-text\",\n            children: \"Click on the map to set coordinates or use your current location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"search-btn\",\n            onClick: handleSearch,\n            disabled: loading,\n            children: loading ? 'Loading...' : 'Find Nearest Bus Stops'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-panel-bottom\",\n        children: [hasSearched && searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-results\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Nearest Bus Stops\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"results-list\",\n            children: searchResults.map((stop, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-item\",\n              onClick: () => handleStopSelect(stop),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"result-index\",\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"result-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: stop.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"distance\",\n                  children: [\"Distance: \", formatDistance(stop.distance)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"coordinates\",\n                  children: [stop.latitude.toFixed(6), \", \", stop.longitude.toFixed(6)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this)]\n            }, stop.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), hasSearched && searchResults.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-results\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No bus stops found near the selected location.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-container\",\n      children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerStyle: mapContainerStyle,\n        center: mapCenter,\n        zoom: zoom,\n        options: defaultOptions,\n        onClick: onMapClick,\n        onLoad: onLoad,\n        onUnmount: onUnmount,\n        children: [userLocation && /*#__PURE__*/_jsxDEV(Marker, {\n          position: {\n            lat: userLocation[0],\n            lng: userLocation[1]\n          },\n          icon: {\n            url: 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png',\n            scaledSize: new window.google.maps.Size(32, 32),\n            origin: new window.google.maps.Point(0, 0),\n            anchor: new window.google.maps.Point(16, 32)\n          },\n          onClick: () => setSelectedMarker('user'),\n          children: selectedMarker === 'user' && /*#__PURE__*/_jsxDEV(InfoWindow, {\n            onCloseClick: () => setSelectedMarker(null),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Your Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 51\n              }, this), userLocation[0].toFixed(6), \", \", userLocation[1].toFixed(6)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }, this), searchMarker && /*#__PURE__*/_jsxDEV(Marker, {\n          position: searchMarker,\n          icon: {\n            url: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png',\n            scaledSize: new window.google.maps.Size(32, 32),\n            origin: new window.google.maps.Point(0, 0),\n            anchor: new window.google.maps.Point(16, 32)\n          },\n          onClick: () => setSelectedMarker('search'),\n          children: selectedMarker === 'search' && /*#__PURE__*/_jsxDEV(InfoWindow, {\n            onCloseClick: () => setSelectedMarker(null),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Search Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 53\n              }, this), searchMarker.lat.toFixed(6), \", \", searchMarker.lng.toFixed(6)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), busStops.map(stop => /*#__PURE__*/_jsxDEV(Marker, {\n          position: {\n            lat: stop.latitude,\n            lng: stop.longitude\n          },\n          icon: {\n            url: 'https://maps.google.com/mapfiles/ms/icons/yellow-dot.png',\n            scaledSize: new window.google.maps.Size(32, 32),\n            origin: new window.google.maps.Point(0, 0),\n            anchor: new window.google.maps.Point(16, 32)\n          },\n          onClick: () => setSelectedMarker(stop.id),\n          children: selectedMarker === stop.id && /*#__PURE__*/_jsxDEV(InfoWindow, {\n            onCloseClick: () => setSelectedMarker(null),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: stop.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 49\n              }, this), searchMarker && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Distance: \", formatDistance(calculateDistance(searchMarker.lat, searchMarker.lng, stop.latitude, stop.longitude))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 17\n          }, this)\n        }, stop.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }, this)), userLocation && selectedStop && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(DirectionsService, {\n            startPoint: userLocation,\n            endPoint: [selectedStop.latitude, selectedStop.longitude],\n            setDirections: setDirections,\n            setIsPathLoading: setIsPathLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this), directions && /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n            directions: directions,\n            options: {\n              suppressMarkers: true,\n              polylineOptions: {\n                strokeColor: '#ff6b6b',\n                strokeWeight: 4,\n                strokeOpacity: 0.7\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 5\n  }, this);\n};\n_s2(BusStopSearch, \"ruMruqm3oPvaV28hAv+Ey57Joeo=\", false, function () {\n  return [useJsApiLoader];\n});\n_c2 = BusStopSearch;\nexport default BusStopSearch;\nvar _c, _c2;\n$RefreshReg$(_c, \"DirectionsService\");\n$RefreshReg$(_c2, \"BusStopSearch\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","GoogleMap","useJsApiLoader","Marker","InfoWindow","DirectionsRenderer","api","jsxDEV","_jsxDEV","Fragment","_Fragment","mapContainerStyle","width","height","defaultOptions","mapTypeControl","streetViewControl","fullscreenControl","zoomControl","myLocationButtonControl","disableDefaultUI","DirectionsService","startPoint","endPoint","setDirections","setIsPathLoading","_s","directionsService","window","google","maps","route","origin","lat","lng","destination","travelMode","TravelMode","WALKING","result","status","DirectionsStatus","OK","console","error","_c","BusStopSearch","userLocation","setUserLocation","_s2","isLoaded","loadError","googleMapsApiKey","process","env","REACT_APP_GOOGLE_API_KEY","libraries","busStops","setBusStops","loading","setLoading","setError","mapCenter","setMapCenter","zoom","setZoom","coordinates","setCoordinates","latitude","longitude","searchMarker","setSearchMarker","searchResults","setSearchResults","hasSearched","setHasSearched","isPathLoading","selectedStop","setSelectedStop","selectedMarker","setSelectedMarker","directions","mapRef","toFixed","fetchBusStops","log","response","get","data","loadBusStops","busStopsArray","Array","isArray","cleanedData","map","stop","parseFloat","err","handleInputChange","e","name","value","target","prev","handleCenterOnUser","handleSearch","isNaN","results","distance","calculateDistance","sortedResults","sort","a","b","handleStopSelect","id","lat1","lon1","lat2","lon2","R","φ1","Math","PI","φ2","Δφ","Δλ","sin","cos","c","atan2","sqrt","formatDistance","meters","round","onMapClick","latLng","onLoad","current","onUnmount","className","children","message","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","onChange","placeholder","onClick","disabled","length","index","center","options","position","icon","url","scaledSize","Size","Point","anchor","onCloseClick","suppressMarkers","polylineOptions","strokeColor","strokeWeight","strokeOpacity","_c2","$RefreshReg$"],"sources":["/home/lubesh/Desktop/DBMS/KGP_Bus/frontend/src/components/user_pages/BusStopSearch.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { GoogleMap, useJsApiLoader, Marker, InfoWindow, DirectionsRenderer } from '@react-google-maps/api';\nimport api from '../../utils/api';\nimport '../../css/user.css';\n\n// Default map container styles\nconst mapContainerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n// Map options with default controls enabled\nconst defaultOptions = {\n  mapTypeControl: true,\n  streetViewControl: true,\n  fullscreenControl: true,\n  zoomControl: true,\n  // Enable the built-in My Location control\n  myLocationButtonControl: true,\n  // Keep default controls visible\n  disableDefaultUI: false,\n};\n\n// Component to handle routing between points using Google Directions API\nconst DirectionsService = ({ startPoint, endPoint, setDirections, setIsPathLoading }) => {\n  useEffect(() => {\n    if (!startPoint || !endPoint) return;\n\n    setIsPathLoading(true);\n\n    const directionsService = new window.google.maps.DirectionsService();\n\n    directionsService.route(\n      {\n        origin: { lat: startPoint[0], lng: startPoint[1] },\n        destination: { lat: endPoint[0], lng: endPoint[1] },\n        travelMode: window.google.maps.TravelMode.WALKING,\n      },\n      (result, status) => {\n        if (status === window.google.maps.DirectionsStatus.OK) {\n          setDirections(result);\n        } else {\n          console.error(`Directions request failed: ${status}`);\n        }\n        setIsPathLoading(false);\n      }\n    );\n\n    return () => {\n      setDirections(null);\n    };\n  }, [startPoint, endPoint, setDirections, setIsPathLoading]);\n\n  return null;\n};\n\n// // Button to center on user's location\n// const LocationButton = ({ userLocation, onClick }) => {\n//   return (\n//     <button \n//       className=\"location-button\" \n//       onClick={onClick}\n//       disabled={!userLocation}\n//       title=\"Center map on your location\"\n//     >\n//       <i className=\"fas fa-location-arrow\"></i> Your Current Location\n//     </button>\n//   );\n// };\n\nconst BusStopSearch = ({ userLocation, setUserLocation }) => {\n  // Load the Google Maps JS API\n  const { isLoaded, loadError } = useJsApiLoader({\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_API_KEY,\n    libraries: ['places'],\n  });\n\n  const [busStops, setBusStops] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [mapCenter, setMapCenter] = useState(userLocation || { lat: 22.3190, lng: 87.3091 });\n  const [zoom, setZoom] = useState(15);\n  const [coordinates, setCoordinates] = useState({\n    latitude: '',\n    longitude: ''\n  });\n  const [searchMarker, setSearchMarker] = useState(\n    userLocation ? { lat: userLocation[0], lng: userLocation[1] } : { lat: 22.3190, lng: 87.3091 }\n  );\n  const [searchResults, setSearchResults] = useState([]);\n  const [hasSearched, setHasSearched] = useState(false);\n  const [isPathLoading, setIsPathLoading] = useState(false);\n  const [selectedStop, setSelectedStop] = useState(null);\n  const [selectedMarker, setSelectedMarker] = useState(null);\n  const [directions, setDirections] = useState(null);\n\n  const mapRef = useRef(null);\n  \n  // Initialize coordinates with user's location as soon as it's available\n  useEffect(() => {\n    if (userLocation) {\n      setCoordinates({\n        latitude: userLocation[0].toFixed(6),\n        longitude: userLocation[1].toFixed(6)\n      });\n      setMapCenter({ lat: userLocation[0], lng: userLocation[1] });\n      setSearchMarker({ lat: userLocation[0], lng: userLocation[1] });\n    }\n  }, [userLocation]);\n  \n  // Function to fetch bus stops\n  const fetchBusStops = async () => {\n    try {\n      console.log('Fetching bus stops from API');\n      const response = await api.get('/bus_stops/getAllBusStops');\n      console.log('Raw API response:', response.data);\n      \n      if (response.data && response.data.data) {\n        return response.data.data;\n      } else {\n        console.error('Invalid response format:', response.data);\n        return [];\n      }\n    } catch (error) {\n      console.error('Error fetching bus stops from database:', error);\n      throw error;\n    }\n  };\n  \n  // Load bus stops on component mount\n  useEffect(() => {\n    const loadBusStops = async () => {\n      try {\n        setLoading(true);\n        const data = await fetchBusStops();\n        \n        const busStopsArray = Array.isArray(data) ? data : [];\n        \n        const cleanedData = busStopsArray.map(stop => ({\n          ...stop,\n          latitude: parseFloat(stop.latitude),\n          longitude: parseFloat(stop.longitude)\n        }));\n        \n        setBusStops(cleanedData);\n        setError(null);\n      } catch (err) {\n        console.error(\"Error loading bus stops:\", err);\n        setError(\"Failed to load bus stops. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    loadBusStops();\n  }, []);\n  \n  // Handle form input changes\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setCoordinates(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  \n  // Center map on user location with maximum zoom\n  const handleCenterOnUser = () => {\n    if (userLocation) {\n      setMapCenter({ lat: userLocation[0], lng: userLocation[1] });\n      setZoom(19);\n      setCoordinates({\n        latitude: userLocation[0].toFixed(6),\n        longitude: userLocation[1].toFixed(6)\n      });\n    }\n  };\n  \n  // Function to search for nearby bus stops\n  const handleSearch = () => {\n    try {\n      const lat = parseFloat(coordinates.latitude);\n      const lng = parseFloat(coordinates.longitude);\n      \n      if (isNaN(lat) || isNaN(lng) || \n          lat < -90 || lat > 90 || \n          lng < -180 || lng > 180) {\n        setError(\"Please enter valid coordinates\");\n        return;\n      }\n      \n      setError(null);\n      setSearchMarker({ lat, lng });\n      \n      const results = busStops.map(stop => {\n        const distance = calculateDistance(\n          lat, lng,\n          stop.latitude, stop.longitude\n        );\n        \n        return {\n          ...stop,\n          distance: distance\n        };\n      });\n      \n      const sortedResults = [...results].sort((a, b) => a.distance - b.distance);\n      setSearchResults(sortedResults);\n      setHasSearched(true);\n      \n      setMapCenter({ lat, lng });\n      setZoom(16);\n    } catch (error) {\n      console.error(\"Search error:\", error);\n      setError(\"An error occurred during search\");\n    }\n  };\n  \n  // Handle click on search result item\n  const handleStopSelect = (stop) => {\n    setMapCenter({ lat: stop.latitude, lng: stop.longitude });\n    setZoom(18);\n    setSelectedStop(stop);\n    setSelectedMarker(stop.id);\n  };\n  \n  // Calculate distance between two coordinates using Haversine formula\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371e3;\n    const φ1 = lat1 * Math.PI / 180;\n    const φ2 = lat2 * Math.PI / 180;\n    const Δφ = (lat2 - lat1) * Math.PI / 180;\n    const Δλ = (lon2 - lon1) * Math.PI / 180;\n    \n    const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n            Math.cos(φ1) * Math.cos(φ2) *\n            Math.sin(Δλ/2) * Math.sin(Δλ/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    \n    return R * c;\n  };\n  \n  // Format distance for display\n  const formatDistance = (meters) => {\n    if (meters < 1000) {\n      return `${Math.round(meters)} meters`;\n    } else {\n      return `${(meters / 1000).toFixed(2)} km`;\n    }\n  };\n\n  // Handle map click to set coordinates\n  const onMapClick = useCallback((e) => {\n    const lat = e.latLng.lat();\n    const lng = e.latLng.lng();\n    setCoordinates({\n      latitude: lat.toFixed(6),\n      longitude: lng.toFixed(6)\n    });\n    setSearchMarker({ lat, lng });\n  }, []);\n\n  // Store map instance when it loads\n  const onLoad = useCallback((map) => {\n    mapRef.current = map;\n  }, []);\n\n  // Clean up function when component unmounts\n  const onUnmount = useCallback(() => {\n    mapRef.current = null;\n  }, []);\n\n  if (loadError) {\n    return <div className=\"error-message\">Error loading Google Maps: {loadError.message}</div>;\n  }\n\n  if (!isLoaded) {\n    return <div className=\"loading-message\">Loading Google Maps...</div>;\n  }\n  \n  return (\n    <div className=\"bus-stop-search\">\n      {/* Full-page loading overlay for directions loading */}\n      {isPathLoading && (\n        <div className=\"full-page-loading-overlay\">\n          <div className=\"spinner\"></div>\n          <div>Loading route. Please wait...</div>\n        </div>\n      )}\n      \n      <div className=\"location-panel\">\n        <div className=\"location-panel-top\">\n          <h2>Search Bus Stops</h2>\n          {error && <div className=\"error-message\">{error}</div>}\n          \n          <div className=\"search-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"latitude\">Latitude:</label>\n              <input \n                type=\"text\" \n                id=\"latitude\" \n                name=\"latitude\" \n                value={coordinates.latitude} \n                onChange={handleInputChange} \n                placeholder=\"e.g. 22.3190\"\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label htmlFor=\"longitude\">Longitude:</label>\n              <input \n                type=\"text\" \n                id=\"longitude\" \n                name=\"longitude\" \n                value={coordinates.longitude} \n                onChange={handleInputChange} \n                placeholder=\"e.g. 87.3091\"\n              />\n            </div>\n            \n            <p className=\"help-text\">Click on the map to set coordinates or use your current location</p>\n            \n            <button \n              className=\"search-btn\"\n              onClick={handleSearch}\n              disabled={loading}\n            >\n              {loading ? 'Loading...' : 'Find Nearest Bus Stops'}\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"location-panel-bottom\">\n          {hasSearched && searchResults.length > 0 && (\n            <div className=\"search-results\">\n              <h3>Nearest Bus Stops</h3>\n              <div className=\"results-list\">\n                {searchResults.map((stop, index) => (\n                  <div \n                    key={stop.id} \n                    className=\"result-item\"\n                    onClick={() => handleStopSelect(stop)}\n                  >\n                    <div className=\"result-index\">{index + 1}</div>\n                    <div className=\"result-details\">\n                      <h4>{stop.name}</h4>\n                      <p className=\"distance\">Distance: {formatDistance(stop.distance)}</p>\n                      <p className=\"coordinates\">\n                        {stop.latitude.toFixed(6)}, {stop.longitude.toFixed(6)}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n          \n          {hasSearched && searchResults.length === 0 && (\n            <div className=\"no-results\">\n              <p>No bus stops found near the selected location.</p>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      <div className=\"map-container\">\n        <GoogleMap\n          mapContainerStyle={mapContainerStyle}\n          center={mapCenter}\n          zoom={zoom}\n          options={defaultOptions}\n          onClick={onMapClick}\n          onLoad={onLoad}\n          onUnmount={onUnmount}\n        >\n          {/* Display user location */}\n          {userLocation && (\n            <Marker\n              position={{ lat: userLocation[0], lng: userLocation[1] }}\n              icon={{\n                url: 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png',\n                scaledSize: new window.google.maps.Size(32, 32),\n                origin: new window.google.maps.Point(0, 0),\n                anchor: new window.google.maps.Point(16, 32),\n              }}\n              onClick={() => setSelectedMarker('user')}\n            >\n              {selectedMarker === 'user' && (\n                <InfoWindow onCloseClick={() => setSelectedMarker(null)}>\n                  <div>\n                    <strong>Your Location</strong><br />\n                    {userLocation[0].toFixed(6)}, {userLocation[1].toFixed(6)}\n                  </div>\n                </InfoWindow>\n              )}\n            </Marker>\n          )}\n          \n          {/* Display search marker (red pin) */}\n          {searchMarker && (\n            <Marker\n              position={searchMarker}\n              icon={{\n                url: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png',\n                scaledSize: new window.google.maps.Size(32, 32),\n                origin: new window.google.maps.Point(0, 0),\n                anchor: new window.google.maps.Point(16, 32),\n              }}\n              onClick={() => setSelectedMarker('search')}\n            >\n              {selectedMarker === 'search' && (\n                <InfoWindow onCloseClick={() => setSelectedMarker(null)}>\n                  <div>\n                    <strong>Search Location</strong><br />\n                    {searchMarker.lat.toFixed(6)}, {searchMarker.lng.toFixed(6)}\n                  </div>\n                </InfoWindow>\n              )}\n            </Marker>\n          )}\n          \n          {/* Display all bus stops */}\n          {busStops.map(stop => (\n            <Marker\n              key={stop.id}\n              position={{ lat: stop.latitude, lng: stop.longitude }}\n              icon={{\n                url: 'https://maps.google.com/mapfiles/ms/icons/yellow-dot.png',\n                scaledSize: new window.google.maps.Size(32, 32),\n                origin: new window.google.maps.Point(0, 0),\n                anchor: new window.google.maps.Point(16, 32),\n              }}\n              onClick={() => setSelectedMarker(stop.id)}\n            >\n              {selectedMarker === stop.id && (\n                <InfoWindow onCloseClick={() => setSelectedMarker(null)}>\n                  <div>\n                    <strong>{stop.name}</strong><br />\n                    {searchMarker && (\n                      <span>\n                        Distance: {formatDistance(\n                          calculateDistance(\n                            searchMarker.lat, searchMarker.lng,\n                            stop.latitude, stop.longitude\n                          )\n                        )}\n                      </span>\n                    )}\n                  </div>\n                </InfoWindow>\n              )}\n            </Marker>\n          ))}\n          \n          {/* Add directions route for selected bus stop */}\n          {userLocation && selectedStop && (\n            <>\n              <DirectionsService\n                startPoint={userLocation}\n                endPoint={[selectedStop.latitude, selectedStop.longitude]}\n                setDirections={setDirections}\n                setIsPathLoading={setIsPathLoading}\n              />\n              {directions && (\n                <DirectionsRenderer\n                  directions={directions}\n                  options={{\n                    suppressMarkers: true,\n                    polylineOptions: {\n                      strokeColor: '#ff6b6b',\n                      strokeWeight: 4,\n                      strokeOpacity: 0.7,\n                    }\n                  }}\n                />\n              )}\n            </>\n          )}\n          \n          {/* Custom control for centering on user location\n          <div className=\"map-controls\">\n            <LocationButton\n              userLocation={userLocation}\n              onClick={handleCenterOnUser}\n            />\n          </div> */}\n        </GoogleMap>\n      </div>\n    </div>\n  );\n};\n\nexport default BusStopSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}